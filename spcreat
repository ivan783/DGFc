(from ss in ctx.Sessions
                       where ss.CardNumber == user.UserName &&
                       (DbFunctions.TruncateTime(ss.DateCreation) >= DbFunctions.TruncateTime(previewDate) &&
                       DbFunctions.TruncateTime(ss.DateCreation) <= DbFunctions.TruncateTime(currentDate))
                       select ss)
(from ss in ctx.Sessions
                       where ss.CardNumber == user.UserName &&
                       (DbFunctions.TruncateTime(ss.DateCreation) >= DbFunctions.TruncateTime(previewDate) &&
                       DbFunctions.TruncateTime(ss.DateCreation) <= DbFunctions.TruncateTime(currentDate))
                       select ss).ToList()
CREATE PROCEDURE GetSessionsByCardNumber
    @CardNumber VARCHAR(50),
    @PreviewDate DATE,
    @CurrentDate DATE
AS
BEGIN
    SET NOCOUNT ON;

    SELECT *
    FROM Sessions
    WHERE CardNumber = @CardNumber
        AND DateCreation >= CAST(@PreviewDate AS DATETIME)
        AND DateCreation < DATEADD(DAY, 1, CAST(@CurrentDate AS DATETIME));
END


var session = this.ctx.Sessions.Where(x => x.Guid == guid && !x.IsDeleted).FirstOrDefault();
            if (session != null)
            {
                session.Token = jwt;
                this.ctx.SaveChanges();
            }
            return session;
CREATE PROCEDURE UpdateSessionToken
    @Guid uniqueidentifier,
    @JWT varchar(500)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE s
    SET Token = @JWT
    FROM Sessions AS s
    WHERE s.Guid = @Guid AND s.IsDeleted = 0;

    SELECT *
    FROM Sessions
    WHERE Guid = @Guid;
END
