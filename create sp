select * from cw.BranchQRPayments BP 
INNER JOIN cw.BusinessQRPayments BQ on BQ.Id=BP.BusinessQRPaymentId
INNER join cw.QrUserClients QC on QC.CompanyId=BQ.CompanyId
 WHERE BP.BusinessQRPaymentId IN (
        SELECT Id
        FROM cw.BusinessQRPayments 
        WHERE Id = 1
    )

select BR.Id, BR.BranchName, BR.UserBranchQR, CONVERT(CHAR(8), BR.DateCreation, 112) as Fecha, BR.IsDeleted from cw.BranchQRPayments BR inner join 
cw.BusinessQRPayments BU on BU.Id=BR.BusinessQRPaymentId
where CONVERT(CHAR(8), BR.DateCreation, 112)<='20230427'
And BR.UserToken !='SIN TOKEN'
 And BR.BusinessQRPaymentId IN (
        SELECT Id
        FROM cw.BusinessQRPayments 
        WHERE Id = 1
    )


CREATE PROCEDURE obtener_datos
  @Id int
AS
BEGIN
  SET NOCOUNT ON;
  SELECT BR.Id, BR.BranchName, BR.UserBranchQR, CONVERT(CHAR(8), BR.DateCreation, 112) as Fecha, BR.IsDeleted 
  FROM cw.BranchQRPayments BR 
  INNER JOIN cw.BusinessQRPayments BU ON BU.Id = BR.BusinessQRPaymentId
  WHERE CONVERT(CHAR(8), BR.DateCreation, 112) <= '20230427'
  AND BR.UserToken != 'SIN TOKEN'
  AND BR.BusinessQRPaymentId = @Id
END
